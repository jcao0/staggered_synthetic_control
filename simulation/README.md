# Simulation Study for Staggered Synthetic Control

This repository provides replication files for the simulation studies in Cao, Lu, and Wu (2020), "Synthetic Control Inference for Staggered Adoption." It enables replication of all simulation figures in the paper, comparing staggered synthetic control (SSC) and alternative synthetic control variants.

## Directory Structure

-   `sim_sampling.R` — R script for sampling procedures in simulations.
-   `sim_scs.m` — MATLAB script for simulating staggered synthetic control.
-   `sim_alternative_methods.R` — R script for simulating alternative methods.
-   `plot_results.R` — R script to generate plots from simulation results.
-   `data/` — Contains simulation datasets generated by `sim_sampling.R`:
    -   `sim_data.mat`, `sim_data.RData` — Simulation data in MATLAB and R formats.
-   `functions/` — Contains R and MATLAB functions used in simulations:
    -   `att_ci.m ,` `att_event_ci.m`— MATLAB functions to implement SSC for overall ATT effect and event-time ATT effect with inference
    -   `ssc.m`, `att_event.m` — MATLAB functions to implement SSC for individual treatment effect event-time ATT effect without inference
    -   `synthetic_control.m`,`synthetic_control_batch.m`— MATLAB functions to estimate synthetic control weights for one unit and a batch of units (i.e., all units)
    -   `ssc_inference.m` — MATLAB functions to implement SSC inference
    -   `vline.m` and `vline_license.txt`— MATLAB functions for plotting and related license
    -   `sampling.R` — R functions to generate simulation sample
    -   `padding_matrix.R` — R functions for storing simulation results
    -   `plot.R` — R functions for plotting
-   `output/` — Contains simulation results as CSV files, named by simulation parameters and method (e.g., `sim_results_N33_T15_r3_asy.csv`).

## Requirements

-   R (4.5.1)
    -   required packages: R.matlab, doParallel, foreach, doRNG, MASS, nleqslv, dplyr, parallel, gsynth, augsynth, ggplot2, patchwork
-   MATLAB (R2018b)
    -   required toolbox: Optimization Toolbox

## Replication Steps

1.  **Generate Simulation Datasets:**

    -   Run (`sim_sampling.R`) to create simulation datasets.
    -   Output files will be saved in the `data/` directory.

2.  **Run Simulations:**

    -   Use the MATLAB script (`sim_scs.m`) for SSC results and R scripts (`sim_alternative_methods.R`) for alternative methods.
    -   Output CSV files will be saved in the `output/` directory.

3.  **Plot Results:**

    -   Use `plot_results.R` to generate figures from the simulation results.